@using Entidades.Modelos
@model IEnumerable<Entidades.Modelos.MatriculaTurma>

@section Stylesheets {
    <link rel="stylesheet" href="./css/index_turmas.css" type="text/css" />
}

@{
   ViewData["Title"] = "Grade de Horários";
}

@{
    List<string> bootStrapColors = new List<string>();
    bootStrapColors.Add("bg-sky");
    bootStrapColors.Add("bg-green");
    bootStrapColors.Add("bg-pink");
    bootStrapColors.Add("bg-yellow");
    bootStrapColors.Add("bg-orange");
    bootStrapColors.Add("bg-purple");
    bootStrapColors.Add("bg-lightred");
    bootStrapColors.Add("bg-warning");
    bootStrapColors.Add("bg-dark");
    bootStrapColors.Add("bg-info");
    bootStrapColors.Add("bg-primary");

    IDictionary<Disciplina, string> discColorMap = new Dictionary<Disciplina, string>();
    Model.ToList().ForEach(mt =>
    {
        if (!discColorMap.ContainsKey(mt.Turma.Disciplina))
        {
            discColorMap.Add(mt.Turma.Disciplina, bootStrapColors[discColorMap.Count % bootStrapColors.Count]);
        }
    });
}

<h1>@ViewData["Title"]</h1>

<div class="container">
    <div class="timetable-img text-center">
        <img src="img/content/timetable.png" alt="">
    </div>
    <div class="table-responsive">
        <table class="table table-bordered text-center table-hover">
            <thead>
                <tr class="bg-light-gray">
                    <th class="text-uppercase">
                        Horário
                    </th>
                    <th class="text-uppercase">SEG</th>
                    <th class="text-uppercase">TER</th>
                    <th class="text-uppercase">QUA</th>
                    <th class="text-uppercase">QUI</th>
                    <th class="text-uppercase">SEX</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("AB")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">A</p>
                            <span>08:00</span><br />
                            <span>08:45</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}AB")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}AB")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        } 
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("B")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">B</p>
                            <span>08:45</span><br />
                            <span>09:30</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}AB")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}AB")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("CD")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">C</p>
                            <span>09:45</span><br />
                            <span>10:30</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}CD")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}CD")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }


                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("D")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">D</p>
                            <span>10:30</span><br />
                            <span>11:15</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}CD")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}CD")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("FG")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">F</p>
                            <span>14:00</span><br />
                            <span>14:45</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}FG")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}FG")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }


                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("G")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">G</p>
                            <span>14:45</span><br />
                            <span>15:30</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}FG")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}FG")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("HI")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">H</p>
                            <span>15:45</span><br />
                            <span>16:30</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}HI")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}HI")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("I")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">I</p>
                            <span>16:30</span><br />
                            <span>17:15</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}HI")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}HI")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("JK")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">J</p>
                            <span>17:30</span><br />
                            <span>18:15</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}JK")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}JK")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("K")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">K</p>
                            <span>18:15</span><br />
                            <span>19:00</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}JK")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}JK")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("LM")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">L</p>
                            <span>19:15</span><br />
                            <span>20:00</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}LM")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}LM")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("M")).Count() > 0))
                {

                    <tr>
                        <td class="align-middle" style="width: 10%">
                            <p class="bg-light-gray rounded">M</p>
                            <span>20:00</span><br />
                            <span>20:45</span>
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}LM")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}LM")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("NP")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">N</p>
                            <span>21:00</span><br />
                            <span>21:45</span> <br />
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}NP")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}NP")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }

                @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains("P")).Count() > 0))
                {
                    <tr>
                        <td class="align-middle">
                            <p class="bg-light-gray rounded">P</p>
                            <span>21:45</span><br />
                            <span>22:30</span> <br />
                        </td>
                        @for (int i = 2; i <= 6; i++)
                        {
                            @if (Model.Any(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}NP")).Count() > 0))
                            {
                                var turma = Model.First(mt => mt.Turma.Horarios.Where(hg => hg.Horario.Contains($"{i}NP")).Count() > 0);
                                <td style="width: 17.11%">
                                    <div class="@discColorMap.Where(dcm => dcm.Key.Equals(@turma.Turma.Disciplina)).First().Value padding-5px-tb padding-15px-lr border-radius-5 margin-10px-bottom text-white font-size16 xs-font-size13">
                                        <span>@turma.Turma.Disciplina.Nome</span>
                                    </div>
                                    <div class="font-size13 text-light-gray margin-10px-top">@turma.Turma.Disciplina.Codigo</div>
                                    <div class="font-size13 text-light-gray">T.@turma.Turma.Id</div>
                                </td>
                            }
                            else
                            {
                                <td class="bg-light-gray" style="width: 17.11%"></td>
                            }
                        }
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>